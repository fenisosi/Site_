<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./src/style.css">
    <meta name="google-signin-client_id" content="149948105115-2du8avmrhamst22h41jc6lr0he8hmpt6.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="notify.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link rel="apple-touch-icon" sizes="180x180" href="./imagens/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./imagens/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./imagens/favicon-16x16.png">
    <link rel="manifest" href="./imagens/site.webmanifest">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
    <script>
        function typeWriter(elemento) {
            const textoArray = elemento.innerHTML.split('');
            elemento.innerHTML = '';
            textoArray.forEach((letra, i) => {
            setTimeout(() => elemento.innerHTML += letra, 75 * i);
            });
        }
        let original = axios({method: 'get', url: 'https://api.github.com/repos/fenisosi/Site_/commits'})   
            .then(res => {
                var primeiro = res["data"][0]["sha"]
                document.querySelector("#mudar").innerHTML = primeiro
            })
    </script>
    <title>Site Legalzim</title>
</head>
<body>
    <!--Cabecalho-->
        <header>
            <nav class="nav">
                <ul>
                    <li>
                        <a href="/#contato" class="pai_do_bunito"><button class="bunito">Henrique</button></a>
                    </li>
                    <li>
                        <p class="menu"><img src="./imagens/Menu.png"></p>
                    </li>
                    <br>
                    <nada class="opt">
                    <li>
                        <a href="/#">Geral</a>
                    </li>
                    <br>
                    <li>
                        <a href="/#aulas">Aulas</a>
                    </li>
                    <br>
                    <li>
                        <a href="/#blogs">Blogs</a>
                    </li>
                    <br>    
                    <li>
                        <a href="/#data">Data</a>
                    </li>
                    <br>
                    <li>
                        <a href="/#editor" class="Notas">Notas</a>
                    </li>
                    </nada>
                </ul>
            </nav>
        </header>
    <!--Fim Do Cabecalho-->
    <div id="mudar"></div>
    <div class="body2">
    <!--Main-->
    <a href="#" class="g-signin2" data-onsuccess="onSignIn"></a>
    <script>
        let profile;
        function onSignIn(googleUser) {
            profile = googleUser.getBasicProfile();
            

            $(".g-signin2").css("display", "none")
            $(".parede").css("display", "block")
            console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
            console.log('Name: ' + profile.getName().toLowerCase());
            console.log('Image URL: ' + profile.getImageUrl());
            console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
            window.location.hash = "#null"
            window.location.hash = ""
        }
        
        
        
        </script>
    <a href="#" onclick="signOut();" class="parede">Sign out</a>
    <script>
        function signOut() {
          var auth2 = gapi.auth2.getAuthInstance();
          auth2.signOut().then(function () {
            console.log('User signed out.');
            var deslogar = confirm("Realmente Quer Deslogar?")
            if (!deslogar) return;
            $(".g-signin2").css("display", "block")
            $(".parede").css("display", "none")
            window.location.hash = "#null"
            window.location.hash = ""
            profile = null
          });
        }
    </script>
        <main id="root" class="root">
        </main>
    <!--Fim Dom Main-->
    <!--Footer-->
    <div class="box-cookies hide">
        <p class="msg-cookies">Este site usa cookies para garantir que você obtenha a melhor experiência. <a href="/#priv">Política de Privacidade</a> </p>
        <div class="btn-cookies"> Aceitar!</div>
    </div>
        <footer class="footer">
            <center><p><a href="/#editor">Use Nosso Editor Online</a></p></center>
        </footer>
    <!--Fim Do Footer-->
    </div>
    <!--Scripts-->
    <script type="module">        
        import home from "./src/pages/load.js"
        import aulas from "./src/pages/aulas.js"
        import pg404 from "./src/pages/404.js"
        import html from "./src/pages/html.js"
        import luisa from "./src/pages/luisa.js"
        import henrique from "./src/pages/henrique.js"
        import blogs from "./src/pages/blogs.js"
        import data from "./src/pages/data.js"
        import priv from "./src/pages/priv.js"
        import editor from "./src/pages/editor.js"
        import contato from "./src/pages/contato.js"



        const main = document.querySelector('#root')



        const init = () => {
            window.addEventListener("hashchange", () => {
                main.innerHTML = ""
                document.querySelector("footer").innerHTML = `<center><p><a href="/#editor">Use Nosso Editor Online</a></p></center>`
                switch(window.location.hash.split("?")[0]){
                    case "":
                        main.appendChild(home(profile?profile.getName().toLowerCase():"Querido Leitor"));
                        break;
                    case "#aulas":
                        main.appendChild(aulas());
                        break;
                    case "#html":
                        main.appendChild(html());
                        break;
                    case "#luisa":
                        main.appendChild(luisa());
                        break;
                    case "#henrique":
                        main.appendChild(henrique());
                        break;
                    case "#blogs":
                        main.appendChild(blogs())
                        break;
                    case "#data":
                        main.appendChild(data(profile?profile:null, localStorage.henriques_site))
                        break;
                    case "#priv":
                        main.appendChild(priv())
                        break;
                    case "#contato":
                        main.appendChild(contato());
                        break;
                    case "#editor":
                        main.appendChild(editor())
                        const app = new Vue({
                            el: '#app',
                            data: function () {
                                return {
                                    notes: [],
                                    active: null
                                }
                            },
                            methods: {
                                remove: function () {
                                    for (let i = 0; i < this.notes.length; i++) {
                                        if (this.notes[i].content == "") {
                                            this.notes.splice(i, 1)
                                        }
                                    }
                                    window.localStorage.setItem("notes", JSON.stringify(this.notes))
                                },
                                create: function () {
                                    this.active = null
                                    this.$refs.textarea.value = ""
                                    this.remove()
                                },
                                select(key) {
                                    this.active = key
                                    this.$refs.textarea.value = this.notes[key].content
                                    this.remove()
                                },
                                save: _.debounce(function () {
                                    let data = this.$refs.textarea.value;
                                    let notes = window.localStorage.getItem("notes") || '[]';
                                    notes = JSON.parse(notes)

                                    if (this.active == null) {
                                        notes.splice(0,0, {
                                            content: data
                                        })
                                    } else {
                                        notes[this.active].content = data
                                    }

                                    this.notes = notes

                                    if (this.active === null) {
                                        this.select(0)
                                    }

                                    window.localStorage.setItem("notes", JSON.stringify(this.notes))
                                    this.remove()
                                    
                                }, 300)
                            },
                            mounted: function () {
                                let notes = window.localStorage.getItem("notes") || '[]';
                                this.notes = JSON.parse(notes)
                            }
                        })
                        const textarea = document.querySelector('textarea')
                        textarea.addEventListener("keyup", () => {
                            const previu = document.querySelector('.previu')
                            localStorage.setItem("Codego-henriques-site", textarea.value)
                        })
                        document.addEventListener("mousemove", () => {
                            const previu = document.querySelector('.previu')
                            localStorage.setItem("Codego-henriques-site", textarea.value)
                        })
                        document.querySelector("footer").innerHTML = `<center><p>Apague Tudo Para Remover! Javascript Desabilitado</p></center>`
                        const btn_codego = document.querySelector("#codegop")
                        btn_codego.addEventListener("click", () => {
                            textarea.value = `&lt!DOCTYPE html&gt
&lthtml lang='pt-br'&gt
&lthead&gt
    &ltmeta charset='UTF-8'&gt
    &ltmeta name='viewport' content='width=device-width, initial-scale=1.0'&gt
    &ltstyle&gt
    &lt/style&gt
    &lttitle&gtMeu Primeiro Programa HTML&lt/title&gt
&lt/head&gt
&ltbody&gt

&lt/body&gt
&lt/html&gt`.replace(/&lt/g, "<").replace(/&gt/g, ">")
                        });
                        break;
                    default:
                        main.appendChild(pg404(window.location.hash.split("#")[1]));
                }
            })
        }

        window.addEventListener("load", () => {
            main.appendChild(home(profile?profile.getName().toLowerCase():"Querido Leitor"));
            window.location.hash = ""; 
            init()
        });

        function reloadHome() {
            main.appendChild(home(profile?profile.getName().toLowerCase():"Querido Leitor"))
        } 
        const menu = document.querySelector(".menu")
        const opt = document.querySelector(".opt") 
        menu.addEventListener("click", () => {
            if (menu.classList.contains("none")) {
                $(".opt").css("display", "none")
                $(".menu").css("position", "absolute")
                $(".g-signin2").css("top", "40px")
                $(".parede").css("top", "45px")
                $(".opt").css("position", "relative")
                menu.classList.remove("none")
                menu.classList.remove("vez")
            } else {
                $(".opt").css("display", "block")
                $(".menu").css("position", "absolute")
                $(".g-signin2").css("top", "-40px")
                $(".parede").css("top", "-40px")
                $(".opt").css("position", "relative")
                menu.classList.add("none")
                menu.classList.remove("vez")
            }
        })
        opt.addEventListener("click", () => {
            $(".opt").css("display", "none")
            $(".menu").css("position", "absolute")
            $(".g-signin2").css("top", "40px")
            $(".parede").css("top", "45px")
            $(".opt").css("position", "relative")
            menu.classList.remove("none")
            menu.classList.remove("vez")
        })
        document.querySelector("body").addEventListener("click", () => {
            if (menu.classList.contains("none") && menu.classList.contains("vez")) {
                $(".opt").css("display", "none")
                $(".menu").css("position", "absolute")
                $(".g-signin2").css("top", "40px")
                $(".parede").css("top", "45px")
                $(".opt").css("position", "relative")
                menu.classList.remove("none")
                menu.classList.remove("vez")
            } else {
                menu.classList.add("vez")
                return
            }
            
        })
        setInterval(function () {
            if (profile) {
                return
            } else {
                $.notify("Logue-se Por Favor!!!", "error")
            }
        }, 300000)
        setInterval(function () {
            let original2 = axios({method: 'get', url: 'https://api.github.com/repos/fenisosi/Site_/commits'})
            .then(res => {
                console.log(primeiro)
                var primeiro = res["data"][0]["sha"]
                console.log(`Vamos Atualizar A Pagina Agora? ${primeiro.toString() != document.querySelector("#mudar").innerHTML}`)
                if (primeiro.toString() != document.querySelector("#mudar").innerHTML) {
                    $.notify("Reiniciando Em 2 Minutos!", "warn")
                    setTimeout(function () {
                    if (localStorage.henriques_site) {
                        if (window.Notification && Notification.permission != "deined") {
                            Notification.requestPermission(function (status) {
                                let n = new Notification("Site Desatualizado!", {
                                    body: "Atualizando..."
                                })
                            })
                        }
                        if (res["data"][0]["commit"]["message"].toLowerCase().includes("html")) {
                        Notification.requestPermission(function (status) {
                            let n = new Notification("Nova Aula De HTML", {
                                body: "SAIO NOVA AULA DE HTMLLLLL"
                            })
                        })
                        } else {
                            console.log("aaa n saio aula de html")
                        }
                    }
                    window.location.reload()
                }, 59000) 
                
            }
                
                
        })
        }, 60000)

        if (!localStorage.henriques_site) {
            document.querySelector(".box-cookies").classList.remove('hide');
        }

        const btnCookies = document.querySelector(".btn-cookies");

        btnCookies.addEventListener('click', () => {
            const consfirma = confirm("Por Favor Ative As Notificaçoes Para Concluir 🤠 \nObs: Caso Esteja Em Um Dispositivo Movel e Não Estiver Uzando Os Navegadores Firefox Android, Opera Android ou Samsung Internet Não Ira Funcionar! \nObs 2: Caso Esteja No Pc E Esteja Usando o Internet Explorer Não Ira Funcionar")
            
            if (consfirma) {
                try {
                    Notification.requestPermission(function (status) {
                        let n = new Notification("EEE AMIGIM", {
                            body: "Cookes Aceitos Com Sucesso!"
                        }).onshow = function()  {
                            localStorage.setItem("henriques_site", "accept"); 
                            document.querySelector(".box-cookies").classList.add('hide');
                        }
                        
                        
                })
                } catch {
                    return;
                }
            } else {
                document.querySelector(".box-cookies").classList.remove('hide');
                return
            }
        }); 
    
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.20/lodash.min.js"></script>
</body>
</html>
